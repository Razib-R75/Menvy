<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Menvy Showroom Invoice</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      color: #000;
      font-size: 18px;
      line-height: 1.6;
      margin: 20px auto;
      padding: 20px;
      width: 100%;
      max-width: 800px;
      border: 2px solid #000;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      min-height: 100vh;
    }

    h2 {
      text-align: center;
      font-size: 36px;
      margin: 0;
    }

    h3 {
      text-align: center;
      font-size: 26px;
      margin: 10px 0;
      text-decoration: underline;
    }

    .shop-info {
      text-align: center;
      font-size: 18px;
      margin-bottom: 15px;
    }

    .content {
      flex: 1;
    }

    .item {
      border-bottom: 1px dashed #bbb;
      padding: 8px 0;
      font-size: 20px;
    }

    input, select {
      border: none;
      border-bottom: 1px solid #888;
      text-align: center;
      font-size: 20px;
      background: transparent;
      margin: 3px 5px;
      width: auto;
    }

    button {
      margin-top: 10px;
      padding: 8px 16px;
      font-size: 18px;
      cursor: pointer;
    }

    .summary {
      margin-top: 20px;
      font-weight: bold;
      font-size: 24px;
      text-align: center;
    }

    .thankyou {
      text-align: center;
      margin-top: 30px;
      font-size: 15px;
      font-weight: bold;
      color: #000;
    }

    /* PRINT MODE */
    @media print {
      @page {
        size: A4;
        margin: 20mm;
      }

      body {
        margin: 0;
        padding: 0;
        border: none;
        height: 100%;
        transform: scale(0.95); /* Slight scaling to ensure fit on one page */
        transform-origin: top center;
      }

      button {
        display: none;
      }

      input, select {
        border: none;
        font-size: 22px;
      }

      h2 {
        font-size: 40px;
      }

      h3 {
        font-size: 30px;
      }

      .shop-info {
        font-size: 20px;
      }

      .item {
        font-size: 22px;
      }

      .summary {
        font-size: 26px;
        margin-top: 20px;
      }

      .thankyou {
        font-size: 32px;
        margin-top: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="content">
    <h2><strong>Menvy Showroom</strong></h2>
    <div class="shop-info">
      üìç Shop No. 12, Ground Floor, SM Tower, Ichakhada Bazar, Magura
    </div>

    <h3>Invoice</h3>

    <p style="font-size:20px;">
      <strong>Date:</strong> <span id="date"></span><br>
      <strong>Customer Name:</strong> <input type="text" id="customerName" placeholder="Enter name"><br>
      <strong>Contact No:</strong> <input type="text" id="contact" placeholder="Optional">
    </p>

    <div id="items"></div>

    <div style="text-align:center;">
      <button onclick="addItem()">‚ûï Add Item</button>
      <button onclick="calculateTotal(false)">üßæ Calculate (Normal)</button>
      <button onclick="calculateTotal(true)">üí∞ Calculate Profit</button>
      <button onclick="window.print()">üñ®Ô∏è Print Invoice</button>
    </div>

    <div class="summary">
      <p id="grandTotal">Grand Total: 0</p>
      <p id="totalProfit">Total Profit: 0</p>
    </div>
  </div>

  <div class="thankyou">
    Thank You for Shopping with Menvy Showroom<br>
  </div>

  <script>
    document.getElementById("date").textContent = new Date().toLocaleDateString();

    function addItem() {
      const container = document.getElementById("items");
      const div = document.createElement("div");
      div.classList.add("item");
      div.innerHTML = `
        <div>Product:
          <select class="product">
            <option value="Shirt">Shirt</option>
            <option value="T-shirt">T-shirt</option>
            <option value="Jacket">Jacket</option>
            <option value="Pant">Pant</option>
            <option value="Trouser">Trouser</option>
          </select>
        </div>
        <div>Price: <input type="number" class="price" value="0" min="0"></div>
        <div>Qty: <input type="number" class="qty" value="1" min="1"></div>
        <div>Discount (%): <input type="number" class="discount" value="0" min="0" max="100"></div>
        <div>Buying Price: <input type="number" class="buying" value="0" min="0"></div>
        <div>Total: <span class="total">0</span></div>
        <div>Profit: <span class="profit">0</span></div>
        <button onclick="removeItem(this)">X</button>
      `;
      container.appendChild(div);
    }

    function removeItem(btn) {
      btn.parentElement.remove();
      calculateTotal(false);
    }

    function calculateTotal(withProfit) {
      let grandTotal = 0;
      let totalProfit = 0;

      document.querySelectorAll(".item").forEach(item => {
        const qty = parseFloat(item.querySelector(".qty").value) || 0;
        const price = parseFloat(item.querySelector(".price").value) || 0;
        const discount = parseFloat(item.querySelector(".discount").value) || 0;
        const buying = parseFloat(item.querySelector(".buying").value) || 0;

        // discount applied on selling price
        const discountedPrice = price - (price * (discount / 100));
        const total = qty * discountedPrice;

        let profit = 0;
        if (withProfit) {
          profit = qty * (discountedPrice - buying);
        }

        item.querySelector(".total").textContent = total.toFixed(2);
        item.querySelector(".profit").textContent = withProfit ? profit.toFixed(2) : "0";

        grandTotal += total;
        totalProfit += profit;
      });

      document.getElementById("grandTotal").textContent = "Grand Total: " + grandTotal.toFixed(2);
      document.getElementById("totalProfit").textContent = withProfit
        ? "Total Profit: " + totalProfit.toFixed(2)
        : "Total Profit: Not Calculated";
    }

    // Add one default item
    addItem();
  </script>
</body>
</html>
