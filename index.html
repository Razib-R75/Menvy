<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Menvy Showroom Invoice</title>
<style>
  /* ===== SCREEN VIEW ===== */
  body {
    font-family: monospace;
    max-width: 600px;
    margin: 10px auto;
    color: #000;
    font-size: 14px;
    line-height: 1.5;
  }

  h2, h3 { text-align: center; margin: 4px 0; }

  input, select {
    width: 100%;
    font-family: monospace;
    font-size: 14px;
    border: 1px solid #ccc;
    margin: 3px 0;
    padding: 4px;
    text-align: center;
    box-sizing: border-box;
  }

  button {
    font-size: 14px;
    padding: 6px 10px;
    margin-top: 8px;
    cursor: pointer;
  }

  .thank {
    text-align: center;
    margin-top: 10px;
    font-size: 12px;
    border-top: 1px dashed #000;
    padding-top: 5px;
  }

  .item {
    border-bottom: 1px dashed #999;
    margin: 5px 0;
    padding-bottom: 5px;
  }

  /* ===== PRINT VIEW (full-width for Goojprt PT-210) ===== */
  @media print {
    @page { size: auto; margin: 0; }

    html, body {
      width: 58mm;        /* exact roll width */
      height: auto;
      margin: 0;
      padding: 0;
      font-family: "Courier New", monospace;
      font-size: 11px;
      line-height: 1.3;
      color: #000;
      background: #fff;
      text-align: center;   /* left align text to remove right blank space */
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    input, select, button, #profitToggle {
      display: none !important;
    }

    .item {
      border-bottom: 1px dashed #000;
      margin: 3px 0;
      padding-bottom: 3px;
    }

    h2 { text-align: center; font-size: 13px; margin: 2px 0; }
    h3 { text-align: center; font-size: 11px; margin: 2px 0; }

    .thank {
      text-align: center;
      font-size: 10px;
      margin-top: 4px;
      border-top: 1px dashed #000;
      padding-top: 3px;
    }

    #grandTotal, #totalProfit {
      width: 100%;
      display: flex;
      justify-content: space-between; /* label left, value right */
      padding: 0 2px;
    }

    #grandTotal span, #totalProfit span { text-align: right; }
  }
</style>
</head>
<body>

<h2>Menvy Showroom</h2>
<div style="text-align:center;font-size:11px;">
  Shop No. 12, Ground Floor, SM Tower<br>
  Ichakhada Bazar, Magura
</div>

<h3>Invoice</h3>

<p>Date: <span id="date"></span></p>
<p>Name: <input id="customerName" placeholder="Customer name"></p>
<p>Phone: <input id="contact" placeholder="Optional"></p>

<label><input type="checkbox" id="profitToggle" onchange="toggleProfit()"> Show Profit</label>

<div id="items"></div>

<button onclick="addItem()">+ Add Item</button>
<button onclick="calculateTotal()">= Calculate</button>
<button onclick="window.print()">üñ®Ô∏è Print</button>

<div id="grandTotal"><strong>Grand Total:</strong> <span>0.00</span></div>
<div id="totalProfit" style="display:none;"><strong>Profit:</strong> <span>0.00</span></div>

<div class="thank">‚ú® Thank you for shopping with Menvy Showroom! ‚ú®</div>

<script>
document.getElementById("date").textContent = new Date().toLocaleDateString();

function toggleProfit() {
  const show = document.getElementById("profitToggle").checked;
  document.querySelectorAll(".buyingInput, .profitText").forEach(el => {
    el.style.display = show ? "block" : "none";
  });
  document.getElementById("totalProfit").style.display = show ? "flex" : "none";
}

function addItem() {
  const itemDiv = document.createElement("div");
  itemDiv.className = "item";
  itemDiv.innerHTML = `
    <p>Item: 
      <select class="product">
        <option>Shirt</option><option>T-shirt</option>
        <option>Jacket</option><option>Pant</option><option>Trouser</option>
      </select>
    </p>
    <p>Qty: <input type="number" class="qty" value="1" min="1">
     Rate: <input type="number" class="price" value="0" min="0"></p>
    <p>Disc%: <input type="number" class="discount" value="0" min="0" max="100">
     <span class="totalText">Total: 0.00</span></p>
    <p class="buyingInput" style="display:none;">Buy: 
     <input type="number" class="buying" value="0" min="0"></p>
    <p class="profitText" style="display:none;">Profit: 
     <span class="profit">0.00</span></p>
  `;
  document.getElementById("items").appendChild(itemDiv);
}

function calculateTotal() {
  let grandTotal = 0;
  let totalProfit = 0;
  const showProfit = document.getElementById("profitToggle").checked;

  document.querySelectorAll(".item").forEach(item => {
    const qty = parseFloat(item.querySelector(".qty").value) || 0;
    const price = parseFloat(item.querySelector(".price").value) || 0;
    const disc = parseFloat(item.querySelector(".discount").value) || 0;
    const buying = parseFloat(item.querySelector(".buying").value) || 0;

    const subtotal = qty * price;
    const discounted = subtotal - (subtotal * (disc / 100));
    const profit = showProfit ? (discounted - (qty * buying)) : 0;

    item.querySelector(".totalText").textContent = "Total: " + discounted.toFixed(2);
    item.querySelector(".profit").textContent = profit.toFixed(2);

    grandTotal += discounted;
    totalProfit += profit;
  });

  document.querySelector("#grandTotal span").textContent = grandTotal.toFixed(2);
  document.querySelector("#totalProfit span").textContent = totalProfit.toFixed(2);
}

toggleProfit();
addItem();
</script>

</body>
</html>
