<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Menvy Showroom Invoice</title>
<style>
  body {
    font-family: monospace;
    max-width: 600px;
    margin: 10px auto;
    color: #000;
    font-size: 14px;
    line-height: 1.5;
  }

  h2, h3 {
    text-align: center;
    margin: 4px 0;
  }

  .center { text-align: center; }

  input, select {
    width: 100%;
    font-family: monospace;
    font-size: 14px;
    border: 1px solid #ccc;
    margin: 3px 0;
    padding: 4px;
    text-align: center;
    box-sizing: border-box;
  }

  button {
    font-size: 14px;
    padding: 6px 10px;
    margin-top: 8px;
    cursor: pointer;
  }

  .thank {
    text-align: center;
    margin-top: 10px;
    font-size: 12px;
    border-top: 1px dashed #000;
    padding-top: 5px;
  }

  .item {
    border-bottom: 1px dashed #999;
    margin: 5px 0;
    padding-bottom: 5px;
  }

  /* ========== PRINT VIEW (Optimized for Goojprt PT-210) ========== */
  @media print {
    @page { margin: 0; }
    body {
      width: 58mm;
      font-family: "Courier New", monospace;
      font-size: 11px;           /* bigger text for readability */
      line-height: 1.4;
      margin: 0 auto;
      text-align: center;        /* center-align the whole invoice */
    }

    input, select, button, #profitToggle {
      display: none;
    }

    .thank {
      font-size: 10px;
      margin-top: 5px;
      border-top: 1px dashed #000;
      padding-top: 4px;
    }

    .item {
      border-bottom: 1px dashed #000;
      margin-bottom: 4px;
      padding-bottom: 3px;
      text-align: left;          /* align details neatly inside items */
    }

    h2 { font-size: 13px; }
    h3 { font-size: 11px; }
  }
</style>
</head>
<body>

<h2>Menvy Showroom</h2>
<div class="center" style="font-size:11px;">
  Shop No. 12, Ground Floor, SM Tower<br>
  Ichakhada Bazar, Magura
</div>

<h3>Invoice</h3>

<p>Date: <span id="date"></span></p>
<p>Name: <input id="customerName" placeholder="Customer name"></p>
<p>Phone: <input id="contact" placeholder="Optional"></p>

<label><input type="checkbox" id="profitToggle" onchange="toggleProfit()"> Show Profit</label>

<div id="items"></div>

<button onclick="addItem()">+ Add Item</button>
<button onclick="calculateTotal()">= Calculate</button>
<button onclick="window.print()">üñ®Ô∏è Print</button>

<h4 id="grandTotal">Grand Total: 0</h4>
<h4 id="totalProfit" style="text-align:right;">Profit: 0</h4>

<div class="thank">‚ú® Thank you for shopping with Menvy Showroom! ‚ú®</div>

<script>
document.getElementById("date").textContent = new Date().toLocaleDateString();

function toggleProfit() {
  const show = document.getElementById("profitToggle").checked;
  document.querySelectorAll(".buyingInput, .profitText").forEach(el => {
    el.style.display = show ? "block" : "none";
  });
  document.getElementById("totalProfit").style.display = show ? "block" : "none";
}

function addItem() {
  const itemDiv = document.createElement("div");
  itemDiv.className = "item";
  itemDiv.innerHTML = `
    <p>Item: 
      <select class="product">
        <option>Shirt</option><option>T-shirt</option>
        <option>Jacket</option><option>Pant</option><option>Trouser</option>
      </select>
    </p>
    <p>Qty: <input type="number" class="qty" value="1" min="1">
     Rate: <input type="number" class="price" value="0" min="0"></p>
    <p>Disc%: <input type="number" class="discount" value="0" min="0" max="100">
     <span class="totalText">Total: 0</span></p>
    <p class="buyingInput" style="display:none;">Buy: 
     <input type="number" class="buying" value="0" min="0"></p>
    <p class="profitText" style="display:none;">Profit: 
     <span class="profit">0</span></p>
  `;
  document.getElementById("items").appendChild(itemDiv);
}

function calculateTotal() {
  let grandTotal = 0;
  let totalProfit = 0;
  const showProfit = document.getElementById("profitToggle").checked;

  document.querySelectorAll(".item").forEach(item => {
    const qty = parseFloat(item.querySelector(".qty").value) || 0;
    const price = parseFloat(item.querySelector(".price").value) || 0;
    const disc = parseFloat(item.querySelector(".discount").value) || 0;
    const buying = parseFloat(item.querySelector(".buying").value) || 0;

    const subtotal = qty * price;
    const discounted = subtotal - (subtotal * (disc / 100));
    const profit = showProfit ? (discounted - (qty * buying)) : 0;

    item.querySelector(".totalText").textContent = "Total: " + discounted.toFixed(2);
    item.querySelector(".profit").textContent = profit.toFixed(2);

    grandTotal += discounted;
    totalProfit += profit;
  });

  document.getElementById("grandTotal").textContent = "Grand Total: " + grandTotal.toFixed(2);
  document.getElementById("totalProfit").textContent = "Profit: " + totalProfit.toFixed(2);
}

toggleProfit();
addItem();
</script>

</body>
</html>
